{"ast":null,"code":"import { MS, MOZ, WEBKIT, RULESET, KEYFRAMES, DECLARATION } from './Enum.js';\nimport { match, charat, substr, strlen, sizeof, replace, combine, filter, assign } from './Utility.js';\nimport { copy, lift, tokenize } from './Tokenizer.js';\nimport { serialize } from './Serializer.js';\nimport { prefix } from './Prefixer.js';\n/**\n * @param {function[]} collection\n * @return {function}\n */\n\nexport function middleware(collection) {\n  var length = sizeof(collection);\n  return function (element, index, children, callback) {\n    var output = '';\n\n    for (var i = 0; i < length; i++) output += collection[i](element, index, children, callback) || '';\n\n    return output;\n  };\n}\n/**\n * @param {function} callback\n * @return {function}\n */\n\nexport function rulesheet(callback) {\n  return function (element) {\n    if (!element.root) if (element = element.return) callback(element);\n  };\n}\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n */\n\nexport function prefixer(element, index, children, callback) {\n  if (element.length > -1) if (!element.return) switch (element.type) {\n    case DECLARATION:\n      element.return = prefix(element.value, element.length, children);\n      return;\n\n    case KEYFRAMES:\n      return serialize([copy(element, {\n        value: replace(element.value, '@', '@' + WEBKIT)\n      })], callback);\n\n    case RULESET:\n      if (element.length) return combine(children = element.props, function (value) {\n        switch (match(value, callback = /(::plac\\w+|:read-\\w+)/)) {\n          // :read-(only|write)\n          case ':read-only':\n          case ':read-write':\n            lift(copy(element, {\n              props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]\n            }));\n            lift(copy(element, {\n              props: [value]\n            }));\n            assign(element, {\n              props: filter(children, callback)\n            });\n            break;\n          // :placeholder\n\n          case '::placeholder':\n            lift(copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]\n            }));\n            lift(copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]\n            }));\n            lift(copy(element, {\n              props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]\n            }));\n            lift(copy(element, {\n              props: [value]\n            }));\n            assign(element, {\n              props: filter(children, callback)\n            });\n            break;\n        }\n\n        return '';\n      });\n  }\n}\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n */\n\nexport function namespace(element) {\n  switch (element.type) {\n    case RULESET:\n      element.props = element.props.map(function (value) {\n        return combine(tokenize(value), function (value, index, children) {\n          switch (charat(value, 0)) {\n            // \\f\n            case 12:\n              return substr(value, 1, strlen(value));\n            // \\0 ( + > ~\n\n            case 0:\n            case 40:\n            case 43:\n            case 62:\n            case 126:\n              return value;\n            // :\n\n            case 58:\n              if (children[++index] === 'global') children[index] = '', children[++index] = '\\f' + substr(children[index], index = 1, -1);\n            // \\s\n\n            case 32:\n              return index === 1 ? '' : value;\n\n            default:\n              switch (index) {\n                case 0:\n                  element = value;\n                  return sizeof(children) > 1 ? '' : value;\n\n                case index = sizeof(children) - 1:\n                case 2:\n                  return index === 2 ? value + element + element : value + element;\n\n                default:\n                  return value;\n              }\n\n          }\n        });\n      });\n  }\n}","map":{"version":3,"sources":["/Users/flok/Documents/Check/indexcards.ai/frontend/node_modules/stylis/src/Middleware.js"],"names":["MS","MOZ","WEBKIT","RULESET","KEYFRAMES","DECLARATION","match","charat","substr","strlen","sizeof","replace","combine","filter","assign","copy","lift","tokenize","serialize","prefix","middleware","collection","length","element","index","children","callback","output","i","rulesheet","root","return","prefixer","type","value","props","namespace","map"],"mappings":"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","sourcesContent":["import {MS, MOZ, WEBKIT, RULESET, KEYFRAMES, DECLARATION} from './Enum.js'\nimport {match, charat, substr, strlen, sizeof, replace, combine, filter, assign} from './Utility.js'\nimport {copy, lift, tokenize} from './Tokenizer.js'\nimport {serialize} from './Serializer.js'\nimport {prefix} from './Prefixer.js'\n\n/**\n * @param {function[]} collection\n * @return {function}\n */\nexport function middleware (collection) {\n\tvar length = sizeof(collection)\n\n\treturn function (element, index, children, callback) {\n\t\tvar output = ''\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\toutput += collection[i](element, index, children, callback) || ''\n\n\t\treturn output\n\t}\n}\n\n/**\n * @param {function} callback\n * @return {function}\n */\nexport function rulesheet (callback) {\n\treturn function (element) {\n\t\tif (!element.root)\n\t\t\tif (element = element.return)\n\t\t\t\tcallback(element)\n\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n */\nexport function prefixer (element, index, children, callback) {\n\tif (element.length > -1)\n\t\tif (!element.return)\n\t\t\tswitch (element.type) {\n\t\t\t\tcase DECLARATION: element.return = prefix(element.value, element.length, children)\n\t\t\t\t\treturn\n\t\t\t\tcase KEYFRAMES:\n\t\t\t\t\treturn serialize([copy(element, {value: replace(element.value, '@', '@' + WEBKIT)})], callback)\n\t\t\t\tcase RULESET:\n\t\t\t\t\tif (element.length)\n\t\t\t\t\t\treturn combine(children = element.props, function (value) {\n\t\t\t\t\t\t\tswitch (match(value, callback = /(::plac\\w+|:read-\\w+)/)) {\n\t\t\t\t\t\t\t\t// :read-(only|write)\n\t\t\t\t\t\t\t\tcase ':read-only': case ':read-write':\n\t\t\t\t\t\t\t\t\tlift(copy(element, {props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]}))\n\t\t\t\t\t\t\t\t\tlift(copy(element, {props: [value]}))\n\t\t\t\t\t\t\t\t\tassign(element, {props: filter(children, callback)})\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t// :placeholder\n\t\t\t\t\t\t\t\tcase '::placeholder':\n\t\t\t\t\t\t\t\t\tlift(copy(element, {props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]}))\n\t\t\t\t\t\t\t\t\tlift(copy(element, {props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]}))\n\t\t\t\t\t\t\t\t\tlift(copy(element, {props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]}))\n\t\t\t\t\t\t\t\t\tlift(copy(element, {props: [value]}))\n\t\t\t\t\t\t\t\t\tassign(element, {props: filter(children, callback)})\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t})\n\t\t\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n */\nexport function namespace (element) {\n\tswitch (element.type) {\n\t\tcase RULESET:\n\t\t\telement.props = element.props.map(function (value) {\n\t\t\t\treturn combine(tokenize(value), function (value, index, children) {\n\t\t\t\t\tswitch (charat(value, 0)) {\n\t\t\t\t\t\t// \\f\n\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\treturn substr(value, 1, strlen(value))\n\t\t\t\t\t\t// \\0 ( + > ~\n\t\t\t\t\t\tcase 0: case 40: case 43: case 62: case 126:\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t// :\n\t\t\t\t\t\tcase 58:\n\t\t\t\t\t\t\tif (children[++index] === 'global')\n\t\t\t\t\t\t\t\tchildren[index] = '', children[++index] = '\\f' + substr(children[index], index = 1, -1)\n\t\t\t\t\t\t// \\s\n\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\treturn index === 1 ? '' : value\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tswitch (index) {\n\t\t\t\t\t\t\t\tcase 0: element = value\n\t\t\t\t\t\t\t\t\treturn sizeof(children) > 1 ? '' : value\n\t\t\t\t\t\t\t\tcase index = sizeof(children) - 1: case 2:\n\t\t\t\t\t\t\t\t\treturn index === 2 ? value + element + element : value + element\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}